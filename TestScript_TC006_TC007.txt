package Testcases;

import java.io.IOException;
import java.util.concurrent.TimeUnit;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.testng.Assert;
import org.testng.annotations.AfterTest;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.Test;



public class Combyne_loginTest {
WebDriver driver;
	@BeforeTest
	public void setup() throws IOException
	{
		System.setProperty("webdriver.chrome.driver", System.getProperty("user.dir")+"\\src\\test\\resources\\Executables\\chromedriver.exe");	
		driver=new ChromeDriver();
		driver.get("https://demo.combyne.ag/login");
		driver.manage().timeouts().pageLoadTimeout(10, TimeUnit.SECONDS);	
		driver.manage().timeouts().implicitlyWait(25, TimeUnit.SECONDS);
		driver.manage().window().maximize();
		
	}
	@Test//This testmethod covers the testcases TC006,TC007
	public void login_TC006_TC007() throws InterruptedException
	{
		
		String before_url= driver.getCurrentUrl();
	WebElement email_id=driver.findElement(By.xpath("//div[@class='Onboard_fields__2N0VA']/div[1]/div/div/fieldset/div/input[@class='Input_input__3544m']"));
	email_id.sendKeys("rohithd.qa@gmail.com");
	WebElement password=driver.findElement(By.xpath("//div[@class='Onboard_fields__2N0VA']/div[2]/div/div/fieldset/div/input[@class='Input_input__3544m']"));
		password.sendKeys("Pranitha@123$");
	WebElement Next =driver.findElement(By.xpath("//input[@type='submit' and @value='Next']"));
		Next.click();

		String after_submission_URL= driver.getCurrentUrl();
		if(!(before_url.equals(after_submission_URL)))
		{
			boolean flag= true;
			Assert.assertTrue(flag);
			System.out.println("Sccessfully logged in");
		}
		else
		{
			
		
		System.out.println("******* Login not successful*******");
		// Error message validations
		
		
	
		boolean errorflg1=	driver.findElement(By.xpath("//div[contains(text(),'Whoops! That email is not associated with an account.')]")).isDisplayed();
			if(errorflg1)	
			{
		System.out.println(" invalid email Error message displayed");
		Assert.assertTrue(errorflg1);
			}
		else {
			
			boolean errorflg2=	driver.findElement(By.xpath("//div[contains(text(),'wrong password')]")).isDisplayed();
			if(errorflg2)	
			{
		System.out.println(" wrongpassword Error message displayed");
		Assert.assertTrue(errorflg2);
			}		
		}
		}
		
	}
	@AfterTest
	public void teardown()
	{
		driver.quit();
	}
}
	
	
	
	

